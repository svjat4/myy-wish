<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Selamat Ulang Tahun, Sayangkuu! üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      overflow: hidden;
    }

    #fireworks {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      z-index: 1;
      pointer-events: none;
    }

    .envelope-container {
      z-index: 2;
      text-align: center;
      max-width: 90%;
      padding: 20px;
    }

    .closed-envelope {
      width: 300px; height: 200px;
      background: linear-gradient(135deg, #ff6ec4, #7873f5);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(255, 105, 180, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: opacity 1s ease;
      animation: pulse 1.5s infinite;
    }

    .intro-text {
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      padding: 10px;
    }

    .intro-text span {
      font-style: italic;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .opened-letter {
      background: white;
      border-radius: 20px;
      color: #444;
      padding: 30px 25px;
      width: 350px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.4);
      animation: popIn 0.7s ease forwards;
    }

    .opened-letter h1 {
      font-family: 'Pacifico', cursive;
      font-size: 1.8rem;
      color: #ff2e8c;
      animation: glow 1.5s infinite alternate;
      margin-bottom: 10px;
    }

    .opened-letter .emoji {
      font-size: 2rem;
      margin: 10px 0;
    }

    .opened-letter .message {
      font-size: 1rem;
      line-height: 1.6;
      margin-top: 10px;
      color: #444;
    }

    .hidden { display: none; }
    .fade-out { animation: fadeOut 1s ease forwards; }

    @keyframes fadeOut {
      to { opacity: 0; transform: scale(0.9); }
    }

    @keyframes popIn {
      0% { transform: scale(0.6); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(255,105,180,0.6);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 30px rgba(255,105,180,1);
      }
    }

    @keyframes glow {
      from { text-shadow: 0 0 5px deeppink, 0 0 10px hotpink; }
      to { text-shadow: 0 0 20px deeppink, 0 0 30px hotpink; }
    }

    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      font-size: 1.2em;
      user-select: none;
      pointer-events: none;
      z-index: 3;
      animation: fall linear infinite;
    }

    @keyframes fall {
      to { transform: translateY(100vh); }
    }

    @media only screen and (max-width: 500px) {
      .closed-envelope, .opened-letter {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>

  <div class="envelope-container" onclick="openEnvelope()">
    <div class="closed-envelope">
      <p class="intro-text">Hai sayang, ada sesuatu buatmu...<br><span>Klik ya üíå</span></p>
    </div>
    <div class="opened-letter hidden">
      <h1>Selamat Ulang Tahun,<br> Ayangkuuu!</h1>
      <div class="emoji">üéâ</div>
      <div class="message">
        <p>Sayangku <strong>Cynthia Nata Widiastuti</strong>,</p>
        <p>
          Terima kasih telah menjadi bagian terindah dalam hidupku. Semoga hari ulang tahunmu
          dipenuhi dengan cinta, kebahagiaan, dan semua impian yang menjadi kenyataan.
        </p>
        <p>
          Aku mencintaimu lebih dari kata-kata yang bisa diucapkan. ‚ù§Ô∏è
        </p>
      </div>
    </div>
  </div>

  <audio id="bg-music" preload="auto" loop>
    <source src="https://cdn.pixabay.com/audio/2022/10/27/audio_7d77be2826.mp3" type="audio/mp3">
    Browser kamu tidak mendukung audio HTML5.
  </audio>

  <script>
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    let fireworks = [];
    let particles = [];

    class Firework {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height;
        this.targetY = Math.random() * (canvas.height * 0.5);
        this.speed = 7;
        this.brightness = Math.random() * 50 + 50;
        this.exploded = false;
      }

      update() {
        this.y -= this.speed;
        if (this.y <= this.targetY && !this.exploded) {
          this.exploded = true;
          this.explode();
        }
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
        ctx.fillStyle = `hsl(${Math.random() * 360}, 100%, ${this.brightness}%)`;
        ctx.fill();
      }

      explode() {
        for (let i = 0; i < 100; i++) {
          particles.push(new Particle(this.x, this.y));
        }
      }
    }

    class Particle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.speed = Math.random() * 6 + 2;
        this.angle = Math.random() * Math.PI * 2;
        this.radius = Math.random() * 2 + 1;
        this.friction = 0.98;
        this.gravity = 0.03;
        this.alpha = 1;
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
      }

      update() {
        this.speed *= this.friction;
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed + this.gravity;
        this.alpha -= 0.015;
      }

      draw() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
        ctx.restore();
      }
    }

    function animate() {
      ctx.fillStyle = 'rgba(0,0,0,0.15)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      fireworks.forEach((f, i) => {
        f.update();
        f.draw();
        if (f.exploded) fireworks.splice(i, 1);
      });

      particles.forEach((p, i) => {
        p.update();
        p.draw();
        if (p.alpha <= 0) particles.splice(i, 1);
      });

      requestAnimationFrame(animate);
    }

    function startFireworks() {
      setInterval(() => {
        fireworks.push(new Firework());
      }, 300);
    }

    function openEnvelope() {
      document.querySelector(".closed-envelope").classList.add("fade-out");
      document.querySelector(".opened-letter").classList.remove("hidden");

      const music = document.getElementById("bg-music");
      music.currentTime = 0;
      music.play().catch(e => {
        console.log("Autoplay error:", e);
      });

      startFireworks();
      createSnow();
    }

    function createSnow() {
      for (let i = 0; i < 50; i++) {
        let snow = document.createElement("div");
        snow.classList.add("snowflake");
        snow.style.left = `${Math.random() * 100}vw`;
        snow.style.animationDuration = `${5 + Math.random() * 5}s`;
        snow.innerText = "‚ùÑ";
        document.body.appendChild(snow);
        setTimeout(() => snow.remove(), 10000);
      }
    }

    animate();
  </script>
</body>
</html>
